{"version":3,"sources":["app/routes/carpool/routes/edittrip/index.js"],"names":["editTrip","props","_isMounted","state","form","post_title","loc_desc","loc_param","cost_jorn","car_space","error","carpoolid","match","params","handle","tripdata","handleChange","bind","handleSubmit","fetchData","this","ApiService","getTripDetails","then","data","setState","event","target","name","value","preventDefault","console","log","edittrip","err","alert","toString","catch","map","index","className","key","onSubmit","label","defaultValue","required","fullWidth","multiline","margin","type","onChange","variant","color","Component","mapStateToProps"],"mappings":"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","file":"static/js/10.77c3a2a8.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport {connect} from 'react-redux';\r\nimport ApiService from 'services/ApiService';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nclass editTrip extends Component{\r\n    _isMounted = false;\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            form: {\r\n              post_title: '',\r\n              loc_desc: '',\r\n              loc_param:'',\r\n              cost_jorn: '',\r\n              car_space:'',\r\n              error:'',\r\n              carpoolid: this.props.match.params.handle\r\n            },\r\n            tripdata: [],\r\n          }\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.fetchData = this.fetchData.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        this._isMounted = true;\r\n        if(this._isMounted){\r\n            this.fetchData();\r\n        }\r\n        else{\r\n            this._isMounted = false;\r\n        }\r\n\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        this._isMounted = false;\r\n    }\r\n\r\n    fetchData(){\r\n        return ApiService.getTripDetails(this.props.match.params).then(data => this.setState({\r\n            tripdata: data\r\n         }))\r\n    }\r\n\r\n    handleChange(event) {\r\n        const { name, value } = event.target;\r\n        const { form } = this.state;\r\n        this.setState({\r\n          form: {\r\n            ...form,\r\n            [name]: value,\r\n            error: '',\r\n          },\r\n        });\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        const { form } = this.state;\r\n        {console.log(form)}\r\n        return ApiService.edittrip(form)\r\n          .then((err) => {\r\n            alert(\"Trip Edited Successfully\");\r\n            //setUser({ name: form.username });\r\n            this.setState({ error: err.toString() });\r\n            //this.props.history.push('/app/carpool');\r\n          })\r\n          .catch(err => {\r\n            this.setState({ error: err.toString() });\r\n          });\r\n      }\r\n\r\n    render (){\r\n        const tripdata = this.state;\r\n        //console.log(tripdata[0].post_title)\r\n        return(\r\n            <>\r\n                {tripdata.tripdata.map((data, index) =>\r\n                <div className=\"row mb-md-6\" key = {index}>\r\n                    <div className =\"col-lg-12 col-md-12 col-12 mb-md-6\">\r\n                        <div className =\"jr-card\">\r\n                            <div className = \"jr-card-header\">\r\n                                <h3 className = \"jr-card-heading\">Edit your {data.post_title} Trip</h3>\r\n                            </div>\r\n                            <div className =\"jr-card-body\">\r\n                                <form name=\"form\" onSubmit = {this.handleSubmit}>\r\n                                    <TextField\r\n                                    label=\"Post Title\"\r\n                                    defaultValue = {data.post_title}\r\n                                    required\r\n                                    fullWidth\r\n                                    multiline\r\n                                    margin=\"normal\"\r\n                                    name=\"post_title\"\r\n                                    type =\"title\"\r\n                                    onChange = {this.handleChange}\r\n                                    className=\"mt-1 my-sm-3\"\r\n                                    />\r\n                                    <TextField\r\n                                    type=\"text\"\r\n                                    defaultValue = {data.loc_desc}\r\n                                    label=\"Post Description\"\r\n                                    required\r\n                                    fullWidth\r\n                                    multiline\r\n                                    name=\"loc_desc\"\r\n                                    onChange = {this.handleChange}\r\n                                    margin=\"normal\"\r\n                                    className=\"mt-1 my-sm-3\"\r\n                                    />\r\n                                    <TextField\r\n                                    type=\"text\"\r\n                                    defaultValue = {data.loc_param}\r\n                                    label=\"Location Coordinates\"\r\n                                    required\r\n                                    multiline\r\n                                    fullWidth\r\n                                    name=\"loc_param\"\r\n                                    onChange = {this.handleChange}\r\n                                    margin=\"normal\"\r\n                                    className=\"mt-1 my-sm-3\"\r\n                                    />\r\n                                    <TextField\r\n                                    type=\"text\"\r\n                                    label=\"Cost of Trip (VToken)\"\r\n                                    required\r\n                                    defaultValue = {data.cost_jorn}\r\n                                    multiline\r\n                                    fullWidth\r\n                                    name=\"cost_jorn\"\r\n                                    onChange = {this.handleChange}\r\n                                    margin=\"normal\"\r\n                                    className=\"mt-1 my-sm-3\"\r\n                                    />\r\n                                    <TextField\r\n                                    type=\"text\"\r\n                                    label=\"Carspace Available\"\r\n                                    required\r\n                                    defaultValue = {data.car_space}\r\n                                    multiline\r\n                                    fullWidth\r\n                                    name=\"car_space\"\r\n                                    onChange = {this.handleChange}\r\n                                    margin=\"normal\"\r\n                                    className=\"mt-1 my-sm-3\"\r\n                                    />\r\n                                    {console.log(this.props.match.params.handle)}\r\n                                    <div className=\"mb-3 d-flex align-items-center justify-content-between\">\r\n                                    <Button type=\"submit\" variant=\"contained\" color=\"primary\">\r\n                                        Post Trip\r\n                                    </Button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                )}\r\n            </>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => state;\r\nexport default (mapStateToProps) (editTrip);"],"sourceRoot":""}